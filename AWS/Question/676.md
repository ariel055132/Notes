# Question 676
## Question
* A company's application uses Network Load Balancers, Auto Scaling groups, Amazon EC2 instances, and databases that are deployed in an Amazon VPC. The company wants to *capture information about traffc to and from the network interfaces in near real time in its Amazon VPC*. The company wants to *send the information to Amazon OpenSearch Service for analysis*.
* Which solution will meet these requirements?

## Option
* A. Create a log group in *Amazon CloudWatch Logs*. Configure *VPC Flow Logs* to send the log data to the log group. Use *Amazon Kinesis Data Streams* to stream the logs from the log group to OpenSearch Service.
* B. Create a log group in *Amazon CloudWatch Logs*. Configure VPC Flow Logs to send the log data to the log group. Use *Amazon Kinesis Data Firehose* to stream the logs from the log group to OpenSearch Service.
* C.Create a trail in *AWS CloudTrail*. Configure VPC Flow Logs to send the log data to the trail. Use *Amazon Kinesis Data Streams* to stream the logs from the trail to OpenSearch Service.
* D.Create a trail in *AWS CloudTrail*. Configure VPC Flow Logs to send the log data to the trail. Use *Amazon Kinesis Data Firehose* to stream the logs from the trail to OpenSearch Service.

## Answer
* B. Create a log group in *Amazon CloudWatch Logs*. Configure VPC Flow Logs to send the log data to the log group. Use *Amazon Kinesis Data Firehose* to stream the logs from the log group to OpenSearch Service.

## Explanation
1. A. CloudWatch Logs + Amazon Kinesis Data Streams
   * Kinesis Data Streams requires you to write custom consumers (e.g., Lambda) to process and push data to OpenSearch.
   * More operational 
2. C & D. AWS CloudTrail + Amazon Kinesis Data Streams / Data Firehose
   * CloudTrail tracks API-level events, not network traffic.
   * CloudTrail tracks how users call the APIs, is it authentiated or have the rights to call the APIs
   * You cannot send VPC Flow Logs to CloudTrail — they are separate logging services.

## Thinking
* 基本上就是 Option A, B; Option C, D 這兩對選一個
* Option A, B 先用 CloudWatch (監察AWS Resources 的使用情況)
* Option C, D 先用 CloudTrail (監管使用者在什麼時候才用了 API)
* 題目是要看進入 VPC 的流量趨勢，因此A，B 所使用的 CloudWatch 比較符合，因此先刪掉 Option C, Option D
* Option A, B 之間的差距只剩 Amazon Data Firehose 和 Amazon Kinesis Data Streams
* 那時候是因為比較常見 Amazon Kinesis Data Streams，所以選了它

## Reference
1. AWS CloudTrail
  * Audit and track API activity
  * Who did what in your AWS account
2. AWS CloudWatch
   * Monitor performance, logs, and metrics in real time 
   * What is happening in your AWS resources

## Reference
1. Amazon Kinesis Data Streams (KDS)
   * Millisecond latency
   * Retention up to 7 days (default is 24 hours)
   * Supports multiple consumers
   * Manual data transformation logic required
2. Amazon Kinesis Data Firehose
   * Near real-time (~60 seconds)
   * No storage/replay (no retention)
   * Handles retry, scaling, compression, encryption, and formatting (Parquet, JSON, etc.)
   * Built-in destination support
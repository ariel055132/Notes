# Question 731
## Question
* A company has an application that uses an Amazon DynamoDB table for storage. A solutions architect discovers that *many requests to the table are not returning the latest data*. The company's users have *not reported any other issues with database performance*. Latency is in an acceptable range.
* Which design change should the solutions architect recommend?

## Option
* A. Add read replicas to the table.
* B. Use a global secondary index (GSI).
* C. Request strongly consistent reads for the table.
* D. Request eventually consistent reads for the table.

## Answer
* C. Request strongly consistent reads for the table.


## Explanation
1. A. *Read Replicas*
   * DynamoDB does not have "read replicas" in the same way that relational databases like Amazon RDS do
2. B. *Global secondary index (GSI)*
   * It is used to query data using attributes other than the primary key. 
   * Would not solve the problem of not returning the latest data from the main table
3. **C. Request strongly consistent reads for the table.** 
   * When you request a strongly consistent read, DynamoDB ensures that you always receive the most up-to-date data, reflecting all prior write operations that were successful. There is no possibility of reading stale data.
4. D. Request *eventually consistent reads* for the table.
   * The default reading methods, offer the best read performance.
   * But it may not reflect the results of a recently completed write

## Thinking
* 基本上先排除 Option A 和 Option B
* 就算 DynamoDB 有 Read Replica，也不會選，因為 Read Replica 主要是改善 DB 的 Read Performance，不符合題目的需求
* Option B 不符合的原因是它是 query 的方式，不符合題目的需求
* 所以只剩 Option C 和 Option D
* 根據定義，選 Option C

## Reference
1. Strongly consistent reads
   * **What it means**: *When you request a strongly consistent read, DynamoDB ensures that you always receive the most up-to-date data*, reflecting all prior write operations that were successful. There is no possibility of reading stale data.
   * **How it works**: To guarantee strong consistency, *DynamoDB performs a read from the leader replica for that data partition*. This *leader replica ensures that all successful writes to that item have been fully propagated before returning the data*.
   * **Advantages**
     1. Always returns the latest data
     2. Critical for certain use cases: Essential for scenarios where data accuracy is paramount, such as financial transactions, inventory management (e.g., checking available stock before a purchase), or user authentication.
   * **Disadvantages**
     1. *Higher latency*: Because the read must go to the leader replica and potentially wait for propagation, strongly consistent reads can have slightly higher latency than eventually consistent reads.
     2. *Lower throughput*: Can handle fewer read operations per second compared to eventually consistent reads, as reads are directed to specific replicas.
     3. *Higher cost*: Consumes more read capacity units (RCUs), making them more expensive
     4. *Not available for Global Secondary Indexes (GSIs)*: Reads from GSIs are always eventually consistent.
     5. *Potential for unavailability*: A strongly consistent read might not be available if there's a network delay or outage affecting the leader replica. In such cases, DynamoDB might return a server error (HTTP 500)

2. Eventually Consistent Read
   * **What it means**: *When you read data using an eventually consistent read, DynamoDB might not return the absolute latest data*. The response could include "stale" or slightly outdated data, especially if a write operation just completed. However, if no new updates are made to that data item, all accesses to that item will eventually return the last updated value (usually within a second or less).
   * **How it works**: DynamoDB stores multiple copies of your data across different storage locations (replicas) for high availability and durability. *With an eventually consistent read, the read request can be served by any of these replicas*. If a write has just occurred, it might take a very short time for that update to propagate to all replicas. If your read happens before a particular replica has received the latest update, you might get the older version.
   * **Advantages**
      1. *Higher read throughput*: Because any replica can serve the read request, it's generally faster and can handle more read operations per second.
      2. *Lower cost*: Eventually consistent reads consume fewer read capacity units (RCUs) compared to strongly consistent reads, making them more cost-effective.
   * **Disadvantages**
      1. *Potential for stale data*: There's a small window where you might read data that isn't the most up-to-date.
   * **Use cases** 
      * This is the default and often sufficient for applications where reading slightly stale data is acceptable. 
      * Examples include social media feeds, user profiles where immediate consistency isn't critical, or analytics dashboards where real-time accuracy isn't the top priority


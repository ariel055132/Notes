# Question 720
## Question
* A manufacturing company runs its report generation application on AWS. The application generates each report in about 20 minutes. The application is built as a monolith that runs on a single Amazon EC2 instance. The application requires frequent updates to its tightly coupled modules. The application becomes complex to maintain as the company adds new features.
* Each time the company patches a software module, the application experiences downtime. Report generation must restart from the beginning aer any interruptions. 
* The company wants to redesign the application so that the *application can be exible, scalable, and gradually improved*. The company wants to *minimize application downtime*.
* Which solution will meet these requirements?

## Options
* A. Run the application on AWS Lambda as a single function with maximum provisioned concurrency.
* B. Run the application on Amazon EC2 Spot Instances as microservices with a Spot Fleet default allocation strategy.
* C. Run the application on Amazon Elastic Container Service (Amazon ECS) as microservices with service auto scaling.
* D. Run the application on AWS Elastic Beanstalk as a single application environment with an all-at-once deployment strategy

## Answer
* C. Run the application on Amazon Elastic Container Service (Amazon ECS) as microservices with service auto scaling.


## Explanation
* redesign a monolithic report generation application to be flexible, scalable, and gradually improved, while minimizing downtime.
1. A. AWS Lambda as a single function + maximum provisioned concurrency
   * Flexibility & Gradual Improvement: Running as a single Lambda function still retains the monolithic structure, making gradual improvements and independent module updates difficult. It doesn't solve the "tightly coupled modules" problem.
   * Scalability: Lambda can scale well, but if the "single function" is still a monolith, it might hit Lambda's execution duration limits (currently 15 minutes), making a 20-minute report impossible without significant re-architecture into smaller functions, which this option doesn't propose.
   * Downtime: While Lambda itself has high availability, deploying a new version of a large, monolithic Lambda function can still cause interruptions if not handled carefully.
   * This option doesn't address the core "monolith" and "tightly coupled modules" issues effectively for the desired flexibility and gradual improvement
2. B. EC2 Spot Instance & microservices + Sport Fleet default allocation strategy
   * Flexibility & Gradual Improvement: Breaking into microservices is excellent for this.
   * Scalability: Microservices on EC2 can be scaled.
   * Downtime: *Spot Instances are problematic for an application where "report generation must restart from the beginning after any interruptions."* Spot Instances can be interrupted with very short notice (2 minutes). If a report takes 20 minutes, an interruption would frequently cause restarts, directly contradicting the requirement to minimize downtime and avoid restarts. Spot Instances are typically used for fault-tolerant, flexible workloads that can handle interruptions. This is a critical mismatch.
3. C. Amazon Elastic Container Service (Amazon ECS) & service auto scaling
   * Flexibility & Gradual Improvement: Moving to microservices is the key here. Each module can become an independent service. This allows independent development, deployment, and scaling of each module, significantly increasing flexibility and enabling gradual improvements without affecting the entire application.
   * Scalability: ECS with Service Auto Scaling allows the application to scale containers (representing microservices) dynamically based on demand. This addresses the scalability requirement.
   * Downtime: Containerization and microservices on ECS allow for *rolling deployments* (e.g., blue/green deployments or gradual rolling updates) where new versions of services can be deployed alongside old ones, gradually shifting traffic, significantly minimizing downtime during updates. If report generation can be broken down into smaller, independent microservices, each part can be more resilient to individual service updates.
4. D. AWS Elastic Beanstalk & single application environment
   * Flexibility & Gradual Improvement: Running as a single application environment still implies a monolithic deployment, contradicting the desire for flexibility and gradual improvement of tightly coupled modules. Elastic Beanstalk supports microservices but this option specifies a "single application environment."
   * Scalability: Elastic Beanstalk provides auto-scaling, but if it's a monolith, you're scaling the whole thing.
   * Downtime: An "all-at-once deployment strategy" means the old version is shut down and the new version is deployed simultaneously. This causes significant downtime, directly contradicting the goal to minimize downtime.



## Thinking
* 基本上先排除 Option B，因為 Spot Instance 需要競標，然後有可能被其他人搶走對應的 instance，導致服務被中斷
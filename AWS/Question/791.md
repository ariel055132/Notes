# Question 791
## Question
* A company has AWS Lambda functions that use environment variables. The company does not want its developers to see environment variables in plaintext.
* Which solution will meet these requirements?

## Option
* A. Deploy code to Amazon EC2 instances instead of using Lambda functions.
* B. Configure SSL encryption on the Lambda functions to use AWS CloudHSM to store and encrypt the environment variables.
* C. Create a certificate in AWS Certificate Manager (ACM). Configure the Lambda functions to use the certificate to encrypt the environment variables.
* D. Create an AWS Key Management Service (AWS KMS) key. Enable encryption helpers on the Lambda functions to use the KMS key to store and encrypt the environment variables.

## Answer
* D. Create an AWS Key Management Service (AWS KMS) key. Enable encryption helpers on the Lambda functions to use the KMS key to store and encrypt the environment variables.

## Explanation
1. A. Deploy code to *Amazon EC2 instances* instead of using Lambda functions.
   * This option suggest a architectural change (Lambda -> EC2 instance)
   * Not an efficient solution for a problem, introduce a significant operational overhead, and also do not solve the core security problem (does not want user to see environment variables in plaintext)
2. B. Configure *SSL encryption* on the Lambda functions to use *AWS CloudHSM* to store and encrypt the environment variables.
   * SSL encryption is for data in transit, cannot solve the encryption of environment variables
   * AWS CloudHSM is hardware security service, designed for strictly compliance requirements
3. C. Create a certificate in *AWS Certificate Manager (ACM)*. Configure the Lambda functions to use the certificate to encrypt the environment variables.
   * ACM is used for the operation of SSL/TLS certificates for securing network communication (data in transit)
   * Not for environment variable
4. D. Create an *AWS Key Management Service (AWS KMS) key*. Enable encryption helpers on the Lambda functions to use the KMS key to store and encrypt the environment variables.
   * AWS KMS: A managed service for creating and controlling encryption keys. It provides a secure, audited, and highly available way to manage the keys used to encrypt your sensitive data.
   * Encryption Helpers: AWS Lambda has a built-in feature that integrates directly with AWS KMS. When you configure a KMS key on a Lambda function and use "encryption helpers," AWS encrypts the environment variables at rest and encrypts them "in transit" when they are sent to the Lambda runtime. The Lambda service itself manages the decryption process, making the plaintext value available to your function code at runtime.

## Thinking
1. AWS Certificate Manager (ACM)
   * 提供 SSL/TLS 證書，目的是保證 data in transit 時的安全
2. AWS Cloud Hardware Security Module (CloudHSM)
   * 硬體上保存 encryption key 
   * for 極嚴格的 compliance service
3. AWS Key Management Service (AWS KMS) 
   * 管理 User / AWS 所建立的 key
   * 可選擇是否需要加密 (encryption helper) 
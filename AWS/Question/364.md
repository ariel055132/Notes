# Question 364
## Question
* A hospital is designing a new application that gathers symptoms from patients. The hospital has decided to use Amazon Simple Queue Service (Amazon SQS) and Amazon Simple Notification Service (Amazon SNS) in the architecture.
* A solutions architect is reviewing the infrastructure design. Data must be *encrypted at rest and in transit*. *Only authorized personnel of the hospital should be able to access the data*.
* Which combination of steps should the solutions architect take to meet these requirements? (Choose two.)

## Option
* A. Turn on server-side encryption on the SQS components. Update the default key policy to restrict key usage to a set of authorized principals.
* B. Turn on server-side encryption on the SNS components by using an AWS Key Management Service (AWS KMS) customer managed key. Apply a key policy to restrict key usage to a set of authorized principals.
* C. Turn on encryption on the SNS components. Update the default key policy to restrict key usage to a set of authorized principals. Set a condition in the topic policy to allow only encrypted connections over TLS.
* D. Turn on server-side encryption on the SQS components by using an AWS Key Management Service (AWS KMS) customer managed key. Apply a key policy to restrict key usage to a set of authorized principals. Set a condition in the queue policy to allow only encrypted connections over TLS.
* E. Turn on server-side encryption on the SQS components by using an AWS Key Management Service (AWS KMS) customer managed key. Apply an IAM policy to restrict key usage to a set of authorized principals. Set a condition in the queue policy to allow only encrypted connections over TLS.

## Answer
* B. Turn on server-side encryption on the SNS components by using an AWS Key Management Service (AWS KMS) customer managed key. Apply a key policy to restrict key usage to a set of authorized principals.
* D. Turn on server-side encryption on the SQS components by using an AWS Key Management Service (AWS KMS) customer managed key. Apply a key policy to restrict key usage to a set of authorized principals. Set a condition in the queue policy to allow only encrypted connections over TLS.

## Explanation
* Option A - C 選一個
* Option D - E 選一個

1. B. Turn on server-side encryption on the SNS components by using an AWS Key Management Service (AWS KMS) customer managed key. Apply a key policy to restrict key usage to a set of authorized principals. This ensures SNS topics are encrypted at rest with a key that is controlled by the hospital. The key policy is a crucial part of KMS that defines who can use the key, thereby restricting access to only authorized personnel.
2. D. Turn on server-side encryption on the SQS components by using an AWS Key Management Service (AWS KMS) customer managed key. Apply a key policy to restrict key usage to a set of authorized principals. Set a condition in the queue policy to allow only encrypted connections over TLS. This addresses both encryption at rest and in transit for SQS. Server-side encryption with a customer-managed key handles encryption at rest and allows fine-grained access control through the key policy. The condition in the queue policy enforces encryption in transit by only allowing connections that use Transport Layer Security (TLS).
* Analysis of Other Options
  1. A. This option is incomplete. While it mentions server-side encryption for SQS, it doesn't specify using a customer-managed key, which is essential for granular access control. Also, it fails to mention a mechanism for enforcing encryption in transit.
  2. C. This option is incorrect because it mentions setting a condition in the topic policy to allow only encrypted connections over TLS. While this is a correct approach for SNS, the first part, "Turn on encryption on the SNS components," is not specific enough. The use of a customer-managed key is a key part of the requirement, and this option does not include that detail.
  3. E. This option is incorrect because it suggests applying an IAM policy to restrict key usage. While IAM policies can be used to grant permissions, the KMS key policy is the primary mechanism to define who can use the key. A key policy is a mandatory component for KMS keys and should be used in conjunction with IAM policies for a secure and well-defined access model.
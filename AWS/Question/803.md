# Question 803
## Question
* A solutions architect is designing a *user authentication solution* for a company. The solution must invoke *two-factor authentication* for users that log in from inconsistent geographical locations, IP addresses, or devices. The solution must also be able to *scale up* to accommodate millions of users.
* Which solution will meet these requirements?

## Options
* A. Configure Amazon Cognito user pools for user authentication. Enable the risk-based adaptive authentication feature with multifactor authentication (MFA).
* B. Configure Amazon Cognito identity pools for user authentication. Enable multi-factor authentication (MFA).
* C. Configure AWS Identity and Access Management (IAM) users for user authentication. Attach an IAM policy that allows the AllowManageOwnUserMFA action.
* D. Configure AWS IAM Identity Center (AWS Single Sign-On) authentication for user authentication. Configure the permission sets to require multi-factor authentication (MFA).

## Answers
* A. Configure Amazon Cognito user pools for user authentication. Enable the risk-based adaptive authentication feature with multifactor authentication (MFA).

## Explanation
* Scale to millions of users
   * Amazon Cognito is a managed service designed for customer-facing applications and is built to scale to millions of users. It is a perfect fit for this requirement.
   * AWS IAM and IAM Identity Center (Single Sign-On) are primarily for internal administrative users of an AWS account, not for external application users. 
* Two-factor authentication for users that log in from inconsistent geographical locations, IP addresses, or devices.
   * Core feature of Amazon Cognito's advanced security features, specifically risk-based adaptive authentication.

1. B. Configure Amazon Cognito identity pools for user authentication. Enable multi-factor authentication (MFA).
   * Identity Pools for authorizing access to AWS services
   * Not for user authentication and sign-in
2. C. Configure AWS Identity and Access Management (IAM) users for user authentication. Attach an IAM policy that allows the AllowManageOwnUserMFA action.
   * IAM users are meant for human administrators and services within an AWS account. 
   * Using IAM for millions of external application users is not scalable and is a security anti-pattern. 
   * IAM service itself is not designed for this use case.
3. D. Configure AWS IAM Identity Center (AWS Single Sign-On) authentication for user authentication. Configure the permission sets to require multi-factor authentication (MFA).
   * IAM Identity Center (formerly AWS Single Sign-On) is designed for providing single sign-on access to multiple AWS accounts and business applications for an organization's employees. 
   * It is not a customer identity and access management (CIAM) service for public-facing applications with millions of users.


## Thinking
* Amazon Congnito
  * Services that simplifies the process of adding user sign-in, sign-up, and access control to web applications
  * User Pools
    * User directory that provides user management for application user *(Authentication)*
    * 認證有相關用戶 (讓 User 可以 Login in)
  * Identity Pools
    * Provide temporary AWS credentials to application users, allowing them to access other AWS service *(Authorization)*
    * 認證有相關用戶後，提供 AWS 認證，讓 User 對相關服務進行存取

* IAM 用來處理 Organization 的 User 登入 （對內）
* Congnito 用來處理 一般大眾 Public 的 User 登入 （對外）
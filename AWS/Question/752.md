# Question 752
## Question
* A company has a multi-tier payment processing application that is based on virtual  machines (VMs). The communication between the tiers occurs asynchronously through a third-party middleware solution that guarantees exactly-once delivery.
* The company needs a solution that requires the *least amount of infrastructure management*. The solution must *guarantee exactly-once delivery for application messaging*.
* Which combination of actions will meet these requirements? (Choose two)

## Option 
* A. Use AWS Lambda for the compute layers in the architecture. 
* B. Use Amazon EC2 instances for the compute layers in the architecture.
* C. Use Amazon Simple Notication Service (Amazon SNS) as the messaging component between the compute layers.
* D. Use Amazon Simple Queue Service (Amazon SQS) FIFO queues as the messaging component between the compute layers.
* E. Use containers that are based on Amazon Elastic Kubernetes Service (Amazon EKS) for the compute layers in the architecture.

## Answer
* A. Use AWS Lambda for the compute layers in the architecture. 
* D. Use Amazon Simple Queue Service (Amazon SQS) FIFO queues as the messaging component between the compute layers.

## Explanation
* re-architect its multi-tier payment processing application
* must prioritize *least infrastructure management* and *guarantee exactly-once delivery*
1. A. Use **AWS Lambda** for the compute layers in the architecture.
   * AWS Lambda is a serverless compute service. You don't manage servers, operating systems, or patching. AWS handles all the underlying infrastructure. This aligns very well with the "least infrastructure management" requirement.
   * While Lambda functions themselves generally follow an "at-least-once" execution model (meaning a function might be invoked multiple times for the same event in certain failure scenarios), when integrated with a service like SQS FIFO, Lambda can effectively achieve exactly-once processing from the queue's perspective. 
2. B. Use **Amazon EC2 instances** for the compute layers in the architecture.
   * Least infrastructure management: EC2 instances require significant infrastructure management
   * Contradcits the "least amount of infrastructure management" requirement.
3. C. Use **Amazon Simple Notification Service (Amazon SNS)** as the messaging component between the compute layers.
   * Amazon SNS is a pub/sub messaging service that provides "at-least-once" delivery for standard topics. It does not guarantee exactly-once delivery. 
4. D. Use **Amazon Simple Queue Service (Amazon SQS) FIFO** queues as the messaging component between the compute layers.
   * Amazon SQS FIFO (First-In-First-Out) queues are specifically designed to guarantee exactly-once processing and preserve message order within a message group.
   * SQS is a fully managed queuing service, meaning AWS handles all the underlying infrastructure, scaling, and maintenance
5. E. Use **containers that are based on Amazon Elastic Kubernetes Service (Amazon EKS)** for the compute layers in the architecture.  
   * While EKS is a managed Kubernetes service, it still requires significant operational overhead compared to serverless options like Lambda. 

## Thinking
* 基本上 Option A, B 之間選一個；Option C-E 之間選一個
* 那時候選了 Option B 和 D
* 選 D 是因為 SQS FIFO 可以確保不同 compute layer 之間的訊息可以一次性，且有序的傳送 (First in First out 的特性)
* 目前基本上看到 Least XX Management，基本上可以先排除 EC2 instance...

